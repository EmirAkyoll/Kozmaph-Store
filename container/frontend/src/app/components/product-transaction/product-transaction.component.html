<div class="container relative font-Ubuntu">
    <app-update-product 
        *ngIf="isUpdateProductModalOpen" 
        [product_data]="dataOfTheProductToBeUpdated"
        (is_update_product_modal_visible)="isUpdateProductModalOpen = $event"
    ></app-update-product>

<app-add-product></app-add-product>

<p-toast></p-toast>

<div class="grid gap-3 mt-5">
    <div *ngIf="products.length === 0" class="flex justify-content-center w-full mt-4 text-sm font-Ubuntu">There is no product.</div>

    <div class="col flex justify-content-center relative" *ngFor="let product of products; let i = index">
        <span class="absolute" style="top: -2px;">
            <p-button (click)="openUpdateModal(product)" icon="pi pi-refresh" styleClass="p-button-success mr-2 border-1 border-white-alpha-90"></p-button>
            <!-- <p-button title="Delete Product" (click)="deleteProduct(product._id)" icon="pi pi-times" styleClass="p-button-danger border-1 border-white-alpha-90"></p-button> -->
            <p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
            <p-button (click)="productDeletionConfirm(product._id)" icon="pi pi-times" title="Delete Product" styleClass="p-button-danger  border-1 border-white-alpha-90"></p-button>
        </span>
        <div [routerLink]="['/product-detail', product._id]" class="pt-0 flex flex-column justify-content-center align-items-center bg-white border-round-lg border-1 border-400 cursor-pointer hover:shadow-3 transition-all transition-duration-150 transition-linear" >
            <img 
                [src]="product.image_urls[0]" 
                class="card-image border-round-lg border-noround-bottom mt-0 pt-0"
                alt={{product.name}}
            />
                
            <div class="card-content text-sm md:text-base text-justify pl-3s pb-3">                    
                <p class="mt-3 overflow-hidden text-overflow-ellipsis max-h-2rems" style="max-height: 40px;">{{product.name}}</p>
                <p>{{product.price}}$</p>
            </div>
        </div>
    </div>
</div>
</div>